<!DOCTYPE html><html><head><title> - tptelements</title><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Inconsolata"><link rel="stylesheet" href="/css/print.css" media="print"><link rel="stylesheet" href="/css/screen.css" media="screen, projection"><link rel="stylesheet" type="text/css" href="/css/lua-reference.css"><link rel="stylesheet" type="text/css" href="/highlightjs/styles/mysolarized.css"></head><body><header><h1><a href="/" class="noul">TPTElements</a></h1><nav><div class="section">Editors for:<a href="/editor/c++">C++</a><a href="/editor/lua">Lua</a><a href="/editor/c">C</a></div><div class="section">Learn:<a href="/reference/lua-reference.html">Lua reference</a><a href="/reference/api-search">API Search</a><a href="/reference/save-format.html">Save format</a></div></nav><div id="aside" class="aside"><p>Links</p><ul><li><a id="bright" href="javascript:;">Bright Mode</a></li><li><a href="#">^</a></li><li><a href="#treetop">Tree</a></li><li><a href="#notes">Notes</a></li><li><a href="#tpt">Legacy API</a></li><li><a href="#elements">Elements API</a></li><li><a href="#simulation">Simulation API</a></li><li><a href="#renderer">Renderer API</a></li><li><a href="#graphics">Graphics API</a></li><li><a href="#fileSystem">File System API</a></li><li><a href="#interface">UI API</a></li><li><a href="#bit">Bitwise API</a></li><li><a href="#boolint">boolint? dafuq</a></li><li><a href="#tpt.el">tpt.el.X.Y</a></li><li><a href="#tpt.eltransition">tpt.eltransition.*</a></li><li><a href="#elements.property">elements.property()</a></li><li><a href="#particles">Particles</a></li><li><a href="#properties">^ properties.</a></li><li><a href="#properties.graphics_func">Graphics</a></li><li><a href="#properties.update_func">Update</a></li><li><a href="#goltable">LIFE ctypes</a></li></ul></div></header><main><h1>Mega coding reference</h1><div class="head"><p>
The gigantic reference that gives you knowledge on literally everything that you
can do with The Powder Toy Lua! Improved all the time and gathered over the ages.
</p>

<p>I suggest you use your browser's find function. The tree <em>can</em> get a
bit verbose at times...</p>


<span class="brightonly">
<img src="http://www.quickmeme.com/img/fd/fdd15fc9a9cb15616e011a460f49f2c237d1ff771db79c1e7492726bf033d63f.jpg" />
</span>


</div><div class="notes"><span id="notes">Notes</span>
-----

* The tree below is pretty packed with information. The doc has long lines so it
  is suggested that you disable word wrap.
* <span class="editable" id="boolint">boolint</span> = integer that acts as a boolean (0 or 1)
* <span class="editable">mixed</span> type means "whatever suits it there"
* If not explicitly noted, all color values have limits of <span class="editable">0 to 255</span> 
  (incl. firer/g/b, colr/g/b) and default to white.
* Extension to the above: all alpha values (firea/cola) have a limit of 100 as 
  the most opaque.

<span id="thats-the-spirit">* Click on all sorts of tree nodes or keys to make your address bar display the
  direct link to it!</span>




</div><div id="tree" class="tree">(global)
│
│
│ <br>│  <span class="comment">Legacy Lua API</span>
│  <span class="comment">Most, if not every, methods here are covered in other APIs. </span>
│  <span class="comment">Except versions. Those are only accessible here.</span>
├ <span class="editable" id="tpt">tpt</span>
│ │
│ ├─ <span id="tpt.version">version</span> 
│ │  ├─ <span id="tpt.version.major">major</span>  <span class="comment">Major game version, for example 81</span>
│ │  ├─ <span id="tpt.version.minor">minor</span>  <span class="comment">Minor version, for example 0</span>
│ │  └─ <span id="tpt.version.build">build</span>  <span class="comment">Build version, for example 292</span>
│ │
│ ├─ <span id="tpt.parts">particle[] parts</span> <span class="comment">Array of particles by index, emulates sim->parts in C++</span>
│ │
│ ├─ partsdata = nil <span class="comment">NYI</span>
│ │  
│ │  <span class="comment">Covered under <a href="#tpt.el">#properties</a> below.</span>
│ ├─ el
│ │  ├─ dust
│ │  └─ ...
│ │
│ ├─ <span id="tpt.test">test</span>                      () <span class="comment">Unknown </span>
│ ├─ <span id="tpt.drawtext">nil drawtext</span>              (int x, int y, string text) <span class="comment">Draws a text string only for the next frame</span>
│ │      ├─                    (int x, int y, string text, int r, int g, int b)
│ │      └─                    (int x, int y, string text, int r, int g, int b, int a)
│ │
│ ├─ <span id="tpt.create">int<span class="editable">[index]</span> create</span>         (int x, int y) <span class="comment">Creates a new particle at (x, y)</span>
│ ├─ <span id="tpt.set_pause">nil/int set_pause</span>         (boolint state) <span class="comment">Pauses/unpauses the game (1 = paused). -1 returns the paused state.</span>
│ ├─ <span id="tpt.toggle_pause">int toggle_pause</span>          () <span class="comment">Toggles pause for the game.</span>
│ ├─ <span id="tpt.set_console">nil set_console</span>           (boolint state) <span class="comment">Opens/closes the console (1 = open)</span>
│ ├─ <span id="tpt.log">nil log</span>                   (string text) <span class="comment">Logs to the console - precisely the thing on the right</span>
│ ├─ <span id="tpt.set_pressure">nil set_pressure</span>          (int x, int y, int width, int height, int value) <span class="comment">Sets pressure for given rectangle. <span class="editable">[wall coordinates]</span></span>
│ ├─ <span id="tpt.set_gravity">nil set_gravity</span>           (int x, int y) <span class="comment">Sets the Newtonian Gravity for a given position. </span>
│ │                            (int x, int y, int width, int height)
│ │                            (int x, int y, int width, int height, int value<span class="editable">[d. 0.0]</span>)
│ │
│ ├─ <span id="tpt.reset_gravity_field">nil reset_gravity_field</span>   (int x, int y) <span class="comment">Sets gravity at (x, y) to 0.0</span>
│ │      └─                    (int x, int y, int width, int height)
│ │
│ ├─ <span id="tpt.reset_velocity">nil reset_velocity</span>        (int x, int y) <span class="comment">Sets velocity (vx and vy) in the specified rectangle to 0</span>
│ │      └─                    (int x, int y, int width, int height)
│ │
│ ├─ <span id="tpt.reset_spark">nil reset_spark</span>           () <span class="comment">Converts SPRK(X) into X</span>
│ ├─ <span id="tpt.set_property">nil set_property</span>          (string property, mixed value) <span class="comment">Sets a property of an element <span class="editable">[affects every element]</span></span>
│ │      ├─                    (string property, mixed value, string type) <span class="comment"><span class="editable">[affects elements of 1 type]</span></span>
│ │      ├─                    (string property, mixed value, int index) <span class="comment"><span class="editable">[affects particle via index]</span></span>
│ │      ├─                    (string property, mixed value, int index, string type) <span class="comment"><span class="editable">[affects particle via index if it is of the specified type]</span></span>
│ │      ├─                    (string property, mixed value, int x, int y) <span class="comment"><span class="editable">[affects particle via position]</span></span>
│ │      ├─                    (string property, mixed value, int x, int y, string type) <span class="comment"><span class="editable">[affects particle via x/y if of the specified type]</span></span>
│ │      ├─                    (string property, mixed value, int x, int y, int width, int height) <span class="comment"><span class="editable">[affects region]</span></span>
│ │      └─                    (string property, mixed value, int x, int y, int width, int height, string type) <span class="comment"><span class="editable">[affects region if of the specified type]</span></span>
│ │
│ ├─ <span id="tpt.get_property">mixed get_property</span>        (string property, int index) <span class="comment">Returns some property of a given particle</span>
│ │        └─                  (string property, int x, int y) 
│ │
│ ├─ <span id="tpt.set_wallmap">nil set_wallmap</span>           (int x, int y, int value) <span class="comment">Place or change a wall at (x, y) to (value)</span>
│ │      └─ <span class="comment">NYI:            (int x, int y, int width, int height, int value)</span>
│ │
│ ├─ <span id="tpt.get_wallmap">int get_wallmap</span>           (int x, int y, <span class="editable">[NYI: int width, int height]</span>)   <span class="comment">Get the wall at <span class="editable">[wall coordinates!]</span> x, y</span>
│ ├─ <span id="tpt.set_elecmap">nil set_elecmap</span>           (int x, int y, int value) <span class="comment">Sets the sim-&gt;emap value for <span class="editable">[wall coordinate]</span> x, y</span>
│ │      └─                    (int x, int y, <span class="editable">[NYI:int width, int height,]</span> int value)
│ │
│ ├─ <span id="tpt.get_elecmap">int get_elecmap</span>           (int x, int y) <span class="comment">Returns the sim-&gt;emap value for <span class="editable">[wall coordinate]</span> x, y</span>
│ ├─ <span id="tpt.drawpixel">nil drawpixel</span>             (int x, int y) <span class="comment">Draws a pixel for the next frame</span>
│ │      ├─                    (int x, int y, int r, int g, int b)
│ │      └─                    (int x, int y, int r, int g, int b, int a)
│ │
│ ├─ <span id="tpt.drawrect">nil drawrect</span>              (int x, int y, int width, int height) <span class="comment">Draws a hollow rect for the next frame</span>
│ │      ├─                    (int x, int y, int width, int height, int red, int green, int blue)
│ │      └─                    (int x, int y, int width, int height, int red, int green, int blue, int alpha)
│ │
│ ├─ <span id="tpt.fillrect">nil fillrect</span>              (int x, int y, int width, int height) <span class="comment">Draws a filled rect for the next frame</span>
│ │      ├─                    (int x, int y, int width, int height, int red, int green, int blue)
│ │      └─                    (int x, int y, int width, int height, int red, int green, int blue, int alpha)
│ │
│ ├─ <span id="tpt.drawline">nil drawline</span>              (int x1, int y1, int x2, int y2) <span class="comment">Draws a line for the next frame</span>
│ │      ├─                    (int x1, int y1, int x2, int y2, int red, int green, int blue)
│ │      └─                    (int x1, int y1, int x2, int y2, int red, int green, int blue, int alpha)
│ │
│ ├─ <span id="tpt.textwidth">int textwidth</span>             (string text) <span class="comment">Find out the width of a string of text in the TPT font</span>
│ ├─ <span id="tpt.get_name">string get_name</span>           () <span class="comment">Returns username</span>
│ ├─ <span id="tpt.set_shortcuts">nil set_shortcuts</span>         (boolint state) <span class="comment">Enable/Disable key shortcuts</span>
│ ├─ <span id="tpt.delete">nil delete</span>                (int index) <span class="comment">Delete particle @ position/index</span>
│ │      └─                    (int x, int y)
│ │
│ ├─ <span id="tpt.register_step">nil register_step</span>         (function onTick) <span class="comment">Add a function to be run every tick. You can have 6 of these.</span>
│ ├─ <span id="tpt.unregister_step">nil unregister_step</span>       (function onTick) <span class="comment">Remove a given tick function to clean up the place. Ha!</span>
│ ├─ <span id="tpt.register_mouseclick">nil register_mouseclick</span>   (function onClick) <span class="comment">Add a function(int mousex, int mousey, int button, int event) to run on mouse click.</span>
│ ├─ <span id="tpt.unregister_mouseclick">nil unregister_mouseclick</span> (function onClick) <span class="comment">Remove a given click function</span>
│ ├─ <span id="tpt.register_keypress">nil register_keypress</span>     (function onKey) <span class="comment">Add a function to run on keypress. Arguments: char key, int keyCode, int modifierKeys, int event</span>
│ ├─ <span id="tpt.unregister_keypress">nil unregister_keypress</span>   (function onKey) <span class="comment">Remove a given key press function.</span>
│ ├─ <span id="tpt.register_mouseevent">nil register_mouseevent</span>   <span class="comment">= register_mouseclick</span>
│ ├─ <span id="tpt.unregister_mouseevent">nil unregister_mouseevent</span> <span class="comment">= unregister_mouseclick</span>
│ ├─ <span id="tpt.register_keyevent">nil register_keyevent</span>     <span class="comment">= register_keypress</span>
│ ├─ <span id="tpt.unregister_keyevent">nil unregister_keyevent</span>   <span class="comment">= register_keyevent</span>
│ ├─ <span id="tpt.input">string input</span>              (string title, string message) <span class="comment">Prompt the user for input and return the data as string. Like <a href="javascript:(prompt('This is a demo'),null)">prompt()</a></span>
│ ├─ <span id="tpt.message_box">nil message_box</span>           (string title, string message) <span class="comment">Show an user some information. Really generic. Like <a href="javascript:alert('Hello :D')">alert()</a></span>
│ ├─ <span id="tpt.get_numOfParts">int get_numOfParts</span>        () <span class="comment">Returns the particle count right now (a maximum of 235008)</span>
│ ├─ <span id="tpt.start_getPartIndex">nil start_getPartIndex</span>    () <span class="comment">Prepare getPartIndex in order to use the other two functions</span>
│ ├─ <span id="tpt.set_property">bool next_getPartIndex</span>    () <span class="comment">True if there's a particle ID to be returned by getPartIndex</span>
│ ├─ <span id="tpt.set_property">int<span class="editable">[index]</span> getPartIndex</span>   () <span class="comment">Returns the next used particle index (you can loop over this)</span>
│ ├─ <span id="tpt.hud">nil/int hud</span>               (boolint state) <span class="comment">Show/Hide the HUD. (1 = Show). -1 returns current state.</span>
│ ├─ <span id="tpt.newtonian_gravity">nil/int newtonian_gravity</span> (boolint state) <span class="comment">Set Newtonian Gravity. (1 = On). -1 returns current state.</span>
│ ├─ <span id="tpt.ambient_heat">nil/int ambient_heat</span>      (boolint state) <span class="comment">Set Ambient Heat. (1 = On) -1 returns current state.</span>
│ ├─ <span id="tpt.active_menu">nil/int active_menu</span>       (int menuID)     <span class="comment">Set active menu section. -1 returns current state.</span>
│ ├─ <span id="tpt.decorations_enable">nil/int decorations_enable</span>(boolint state) <span class="comment">Toggle decorations. (1 = On) -1 returns current state.</span>
│ ├─ <span id="tpt.display_mode">nil display_mode</span>          (int displayID)  <span class="comment">Set Display mode. </span>
│ ├─ <span id="tpt.throw_error">nil throw_error</span>           (string text) <span class="comment">Display a message with an error of your choosing.</span>
│ ├─ <span id="tpt.heat">nil/int heat</span>                  (boolint state) <span class="comment">Toggle Heat. (1 = On) -1 returns current state.</span>
│ ├─ <span id="tpt.setfire">nil setfire</span>               (int strength<span class="editable">[=1]</span>) <span class="comment">Set strength of fire effects</span>
│ ├─ <span id="tpt.setdebug">nil setdebug</span>              (int level) <span class="comment">Deprecated:  Set debug level. 1 is what pressing D produces, higher levels <em>used</em> to do something</span>
│ ├─ <span id="tpt.setfpscap">nil setfpscap</span>             (int maxFPS<span class="editable">[=60]</span>) <span class="comment">Set max FPS</span>
│ ├─ <span id="tpt.getscript">nil getscript</span>             (string author, string id) <span class="comment">Fetch a script from the TPT Script Index. The index has no known entries as of 2013-12-27.</span>
│ ├─ <span id="tpt.setwindowsize">nil setwindowsize</span>         (int scale<span class="editable">[=1||2, d. 1]</span>, boolint fullscreen<span class="editable">[=0]</span>) <span class="comment">Set window size (scaled and fullscreen)</span>
│ ├─ <span id="tpt.watertest">int watertest</span>             () <span class="comment">Toggle water equalization. Returns new state.</span>
│ ├─ <span id="tpt.screenshot">nil screenshot</span>            () <span class="comment">Take a screenshot and save it as screenshot_####.png</span>
│ ├─ <span id="tpt.element">int/string element</span>        (string element) <span class="comment">Return element ID from element name as string</span>
│ │             └─             (element id) <span class="comment">Return element name as string from element ID</span>
│ │
│ ├─ <span id="tpt.get_clipboard">string get_clipboard</span>      () <span class="comment">Returns the current clipboard data as text</span>
│ ├─ <span id="tpt.set_clipboard">nil set_clipboard</span>         (string data) <span class="comment">Sets the current clipboard data as text</span>
│ ├─ <span id="tpt.element_func">nil element_func</span>          (element id, function onElement) <span class="comment">Make a particle update function. <a href="#properties.update_func">#update_func</a></span>
│ │      └─                    (element id, function onElement, bool replace) <span class="comment">Replace the previous update function.</span>
│ │
│ └─ <span id="tpt.graphics_func">nil graphics_func</span>         (element id, function onDraw) <span class="comment">Make an element look fancy. <a href="#properties.graphics_func">#graphics_func</a></span>

│  <span class="comment" id="interface">Interface API</span>
│  <span class="comment">We apologize for the inconvenience.</span>
│ 
├ <span class="editable">interface (ui)</span>
│ │ 
│ ├─ <span id="ui.showWindow">nil showWindow</span>                (Window w) <span class="comment">Opens a Window.</span>
│ ├─ <span id="ui.closeWindow">nil closeWindow</span>               (Window w) <span class="comment">Closes a Window.</span>
│ ├─ <span id="ui.addComponent">nil addComponent</span>              (Component c) <span class="comment">Adds a Component to the main window.</span>
│ ├─ <span id="ui.removeComponent">nil removeComponent</span>           (Component c) <span class="comment">Removes a Component from the main window.</span>
│ │  
│ ├─ <span class="editable" id="ui.Component">Component</span> <span class="comment">Generic class for utilities</span>
│ │  ├─ <span id="ui.Component:visible"> nil / bool :visible</span>      () <span class="comment">Gets/sets whether the component is visible</span>
│ │  │              └─            (bool visible)
│ │  │
│ │  ├─ <span id="ui.Component:size"> nil / int,int :size</span>      () <span class="comment">Gets/sets the component's size</span>
│ │  │                 └─         (int width, int height)
│ │  │
│ │  └─ <span id="ui.Component:position"> nil / int,int :position</span>  () <span class="comment">Gets/sets the component's position</span>
│ │                    └─         (int x1, int y1)
│ │ 
│ ├─ <span class="editable" id="ui.Button">Button</span>
│ │  │
│ │  ├─ <span id="ui.Button:new">Button :new</span>            (int x, int y, int width, int height) <span class="comment">Creates a new button. Event listener needs to be attached later.</span>
│ │  │         └─              (int x, int y, int width, int height, string text, string tooltip)
│ │  ├─ <span id="ui.Button:action">nil :action</span>            (function onClick) <span class="comment">Attaches an event listener. Arguments: Button sender</span>
│ │  ├─ <span id="ui.Button:text">nil/string :text</span>       () <span class="comment">Gets/sets the button's text</span>
│ │  │             └─          (string text) 
│ │  └─ <span id="ui.Button:enabled">nil/bool :enabled</span>      () <span class="comment">Get/set the button's enabled state</span>
│ │              └─            (bool state) 
│ │
│ ├─ <span class="editable" id="ui.ProgressBar">ProgressBar</span>
│ │  │
│ │  │
│ │  ├─ <span id="ui.Progressbar:new">ProgressBar :new</span>       (int x, int y, int width, int height, int progress, string status) <span class="comment">Creates a new instance.</span>
│ │  ├─ <span id="ui.Progressbar:new">nil/int :progress</span>      () <span class="comment">Gets/sets the progress bar progress <span class="editable">[0:100]</span> -1 makes it scroll right slowly.</span>
│ │  │          └─             (int progress) 
│ │  └─ <span id="ui.Progressbar:new">nil/string :status</span>     () <span class="comment">Gets/sets the progress bar's status text.</span>
│ │                └─          (string status)
│ │ 
│ ├─ <span class="editable" id="ui.Slider">Slider</span>
│ │  │
│ │  ├─ <span id="ui.Slider:new">Slider :new</span>            (int x, int y, int width, int height) <span class="comment">Creates a new instance. Specify the event listener and handler later on.</span>
│ │  ├─ <span id="ui.Slider:onValueChanged">nil :onValueChanged</span>    (function onChange) <span class="comment">Attaches a onChanged event handler. Arguments: sender, value</span>
│ │  ├─ <span id="ui.Slider:value">nil/int :value</span>         () <span class="comment">Gets/sets its value. </span>
│ │  │          └─             (int value) 
│ │  └─ <span id="ui.Slider:steps">nil/int :steps</span>         () <span class="comment">Gets/sets the amount of 'steps' the slider has.</span>
│ │             └─             (int steps) 
│ │ 
│ ├─ <span class="editable" id="ui.Checkbox">Checkbox</span>
│ │  │
│ │  ├─ <span id="ui.Checkbox:new">Checkbox :new</span>          (int x, int y, int width, int height, <span class="editable">[string text = ""]</span>) <span class="comment">Creates a new instance.</span>
│ │  ├─ <span id="ui.Checkbox:action">nil :action</span>            (function onAction) <span class="comment">Arguments: sender, value</span>
│ │  ├─ <span id="ui.Slider:text">nil/string :text</span>       () <span class="comment">Gets/sets its text. </span>
│ │  │             └─          (string text) 
│ │  └─ <span id="ui.Slider:checked">nil/int :checked</span>       () <span class="comment">Gets/sets its checked state. </span>
│ │             └─             (int checked) 
│ │    
│ │ 
│ ├─ <span class="editable" id="ui.Label">Label</span>
│ │  │
│ │  ├─ <span id="ui.Label:new">Label :new</span>             (int x, int y, int width, int height, <span class="editable">[string text = ""]</span>)
│ │  └─ <span id="ui.Label:text">nil/string :text</span>       () <span class="comment">Gets/sets its text. </span>
│ │                └─          (string text) 
│ │    
│ │ 
│ ├─ <span class="editable" id="ui.Textbox">Textbox</span>
│ │  │
│ │  ├─ <span id="ui.Textbox:new">Textbox :new</span>           (int x, int y, int width, int height <span class="editable">[, string text = "" [, string placeholder = "" ]</span>])
│ │  ├─ <span id="ui.Textbox:onTextChanged">nil :onTextChanged</span>     (function onChange) <span class="comment">Arguments: sender</span>
│ │  ├─ <span id="ui.Textbox:readonly">nil/bool   :readonly</span>   () <span class="comment">Gets/sets its readonly state. </span>
│ │  │             └─          (string readonly) 
│ │  └─ <span id="ui.Textbox:text">nil/string :text</span>       () <span class="comment">Gets/sets its text. </span>
│ │                └─          (string text) 
│ │ 
│ │ 
│ └─ <span class="editable" id="ui.Window">Window</span>
│    │
│    ├─ Window :new            (int x, int y, int width, int height) <span class="comment">A container element for components. Set x/y to -1 to center.</span>
│    │ 
│    ├─ <span id="ui.Window:onInitialized">nil :onInitialized</span>     (function func) <span class="comment">=> Function listener for initialization. Callback has no arguments.</span>
│    ├─ <span id="ui.Window:onTick">nil :onTick</span>            (function func) <span class="comment">=> Every tick. Callback has no arguments.</span>
│    ├─ <span id="ui.Window:onExit">nil :onExit</span>            (function func) <span class="comment">=> When the window closes. Callback has no arguments.</span>
│    ├─ <span id="ui.Window:onTryOkay">nil :onTryOkay</span>         (function func) <span class="comment">=> </span>
│    ├─ <span id="ui.Window:onDraw">nil :onDraw</span>            (function func) <span class="comment">=> When the window is drawn.</span>
│    ├─ <span id="ui.Window:onMouseUp">nil :onMouseUp</span>         (function func) <span class="comment">=> Callback args: int x, int y, int button</span>
│    ├─ <span id="ui.Window:onMouseDown">nil :onMouseDown</span>       (function func) <span class="comment">=> Callback args: int x, int y, int button</span>
│    ├─ <span id="ui.Window:onMouseMove">nil :onMouseMove</span>       (function func) <span class="comment">=> Callback args: int x, int y, int dx, int dy</span>
│    ├─ <span id="ui.Window:onMouseWheel">nil :onMouseWheel</span>      (function func) <span class="comment">=> Callback args: int x, int y, int d</span>
│    ├─ <span id="ui.Window:onKeyPress">nil :onKeyPress</span>        (function func) <span class="comment">=> Callback args: int key, Uint16 character, bool shift, bool ctrl, bool alt</span>
│    ├─ <span id="ui.Window:onKeyRelease">nil :onKeyRelease</span>      (function func) <span class="comment">=> Callback args: int key, Uint16 character, bool shift, bool ctrl, bool alt</span>
│    ├─ <span id="ui.Window:onFocus">nil :onFocus</span>           (function func) <span class="comment">=> When receives focus. Callback has no arguments. </span>
│    ├─ <span id="ui.Window:onTick">nil :onBlur</span>            (function func) <span class="comment">=> When loses focus. Callback has no arguments.</span>
│    ├─ <span id="ui.Window:onTick">nil :onTryExit</span>         (function func) <span class="comment">=> When user attempts to exit the window. Callback has no arguments.</span>
│    ├─ <span id="ui.Window:onTick">nil :addComponent</span>      (Component c) <span class="comment">Adds a Component to the Window.</span>
│    └─ <span id="ui.Window:onTick">nil :removeComponent</span>   (Component c) <span class="comment">Removes a Component from the Window.</span>

│  <span class="comment" id="elements">Elements API</span>
│  <span class="comment">Everything to do with elements, adding them, modifying them, ...</span>
│  <span class="comment">--</span>
│  
├ <span class="editable">elements (elem)</span>
│ │ 
│ │  <span class="comment">Particle movement types in .properties</span>
│ ├─ <span id="elem.TYPE_PART">TYPE_PART</span> <span class="editable">0x00001</span>
│ ├─ <span id="elem.TYPE_LIQUID">TYPE_LIQUID</span> <span class="editable">0x00002</span>
│ ├─ <span id="elem.TYPE_SOLID">TYPE_SOLID</span> <span class="editable">0x00004</span>
│ ├─ <span id="elem.TYPE_GAS">TYPE_GAS</span> <span class="editable">0x00008</span>
│ ├─ <span id="elem.TYPE_ENERGY">TYPE_ENERGY</span> <span class="editable">0x00010</span>
│ │ 
│ │  <span class="comment">Particle properties</span>
│ ├─ <span id="elem.PROP_CONDUCTS">PROP_CONDUCTS</span> <span class="editable">0x00020</span>
│ ├─ <span id="elem.PROP_BLACK">PROP_BLACK</span> <span class="editable">0x00040</span>
│ ├─ <span id="elem.PROP_NEUTPENETRATE">PROP_NEUTPENETRATE</span> <span class="editable">0x00080</span>
│ ├─ <span id="elem.PROP_NEUTABSORB">PROP_NEUTABSORB</span> <span class="editable">0x00100</span>
│ ├─ <span id="elem.PROP_NEUTPASS">PROP_NEUTPASS</span> <span class="editable">0x00200</span>
│ ├─ <span id="elem.PROP_DEADLY">PROP_DEADLY</span> <span class="editable">0x00400</span>
│ ├─ <span id="elem.PROP_HOT_GLOW">PROP_HOT_GLOW</span> <span class="editable">0x00800</span>
│ ├─ <span id="elem.PROP_LIFE">PROP_LIFE</span> <span class="editable">0x01000</span>
│ ├─ <span id="elem.PROP_RADIOACTIVE">PROP_RADIOACTIVE</span> <span class="editable">0x02000</span>
│ ├─ <span id="elem.PROP_LIFE_DEC">PROP_LIFE_DEC</span> <span class="editable">0x04000</span>
│ ├─ <span id="elem.PROP_LIFE_KILL">PROP_LIFE_KILL</span> <span class="editable">0x08000</span>
│ ├─ <span id="elem.PROP_LIFE_KILL_DEC">PROP_LIFE_KILL_DEC</span> <span class="editable">0x10000</span>
│ ├─ <span id="elem.PROP_SPARKSETTLE">PROP_SPARKSETTLE</span> <span class="editable">0x20000</span>
│ ├─ <span id="elem.PROP_NOAMBHEAT">PROP_NOAMBHEAT</span> <span class="editable">0x40000</span>
│ │  <span class="comment">Applies the CLNE effect: drawing with the brush over CLNE sets CLNE's ctype to something</span>
│ ├─ <span id="elem.PROP_DRAWONCTYPE">PROP_DRAWONCTYPE</span> <span class="editable">0x80000</span>
│ │  <span class="comment">Doesn't allow the CLNE effect to apply with this element</span>
│ ├─ <span id="elem.PROP_NOCTYPEDRAW">PROP_NOCTYPEDRAW</span> <span class="editable">0x100000</span>
│ │ 
│ │  <span class="comment">.flags for how often update happens etcetera</span>
│ ├─ <span id="elem.FLAG_STAGNANT">FLAG_STAGNANT</span> <span class="editable">0x1</span> <span class="comment">Update a bit less than usually</span>
│ ├─ <span id="elem.FLAG_SKIPMOVE">FLAG_SKIPMOVE</span> <span class="editable">0x2</span> <span class="comment">Don't do movement checks</span>
│ ├─ <span id="elem.FLAG_MOVABLE">FLAG_MOVABLE</span> <span class="editable">0x8</span> 
│ │ 
│ │  <span class="comment">.state values - element states</span>
│ ├─ <span id="elem.ST_NONE">ST_NONE</span> <span class="editable">0</span>
│ ├─ <span id="elem.ST_SOLID">ST_SOLID</span> <span class="editable">1</span>
│ ├─ <span id="elem.ST_LIQUID">ST_LIQUID</span> <span class="editable">2</span>
│ ├─ <span id="elem.ST_GAS">ST_GAS</span> <span class="editable">3</span>
│ │ 
│ │  <span class="comment">Element categories in the menu</span>
│ ├─ <span id="elem.SC_WALL">SC_WALL</span> <span class="editable">0</span>
│ ├─ <span id="elem.SC_ELEC">SC_ELEC</span> <span class="editable">1</span>
│ ├─ <span id="elem.SC_POWERED">SC_POWERED</span> <span class="editable">2</span>
│ ├─ <span id="elem.SC_SENSOR">SC_SENSOR</span> <span class="editable">3</span>
│ ├─ <span id="elem.SC_FORCE">SC_FORCE</span> <span class="editable">4</span>
│ ├─ <span id="elem.SC_EXPLOSIVE">SC_EXPLOSIVE</span> <span class="editable">5</span>
│ ├─ <span id="elem.SC_GAS">SC_GAS</span> <span class="editable">6</span>
│ ├─ <span id="elem.SC_LIQUID">SC_LIQUID</span> <span class="editable">7</span>
│ ├─ <span id="elem.SC_POWDERS">SC_POWDERS</span> <span class="editable">8</span>
│ ├─ <span id="elem.SC_SOLIDS">SC_SOLIDS</span> <span class="editable">9</span>
│ ├─ <span id="elem.SC_NUCLEAR">SC_NUCLEAR</span> <span class="editable">10</span>
│ ├─ <span id="elem.SC_SPECIAL">SC_SPECIAL</span> <span class="editable">11</span>
│ ├─ <span id="elem.SC_LIFE">SC_LIFE</span> <span class="editable">12</span>
│ ├─ <span id="elem.SC_TOOL">SC_TOOL</span> <span class="editable">13</span>
│ ├─ <span id="elem.SC_DECO">SC_DECO</span> <span class="editable">14</span>
│ │ 
│ │  <span class="comment">Element IDs - one for every default element, as well as Lua elements according to namespace</span>
│ ├─ <span id="elem.DEFAULT_PT_">DEFAULT_PT_<span class="editable">[DUST]</span></span>
│ │
│ ├─ <span id="elem.allocate">int allocate</span>              (string namespace, string name) <span class="comment">Sets up a space for a new element. Returns new element ID. </span>
│ │  <span class="comment">Creates key elements.NAMESPACE_PT_NAME for the ID. </span>
│ ├─ <span id="elem.free">nil free</span>                  (int elementID) <span class="comment">Deletes a given element from existence.</span>
│ ├─ <span id="elem.loadDefault">nil loadDefault</span>           () <span class="comment">Deletes all new elements. Restores all default elements.</span>
│ ├─ <span id="elem.element">nil/table element</span>         (int elementID) <span class="comment">Returns a table with the element's properties, to modify and set further on</span>
│ │            └─              (int elementID, table properties) <span class="comment">Sets _all_ the properties of an element to ones from the table. Useful for element cloning.</span>
│ └─ <span id="elem.property">nil/mixed property</span>        (int elementID, string property) <span class="comment">Returns an element's single property.</span>
│              └─              (int elementID, string property, mixed value) <span class="comment">Sets an element's single property to value.</span>

│  <span class="comment" id="renderer">Renderer API</span>
│  <span class="comment">Everything to do with how particles look.</span>
│
│
├ <span class="editable">renderer (ren) </span>
│ │
│ │  <span class="comment">Pixel drawing modes. See <a href="http://powdertoy.co.uk/System/External/MediaWiki/images/a/a3/Particle_Drawing_Modes.png">Particle_Drawing_Modes.png</a> for a quick reference.</span>
│ ├─ <span id="ren.PMODE">PMODE </span><span class="editable">0x00000FFF</span>         <span class="comment">Bitmask to get display modes via binary AND</span>
│ ├─ <span id="ren.PMODE">PMODE_NONE </span><span class="editable">0x00000000</span>    <span class="comment">Invisible as in totally invisible</span>
│ ├─ <span id="ren.PMODE">PMODE_FLAT </span><span class="editable">0x00000001</span>    <span class="comment">Regular like Basic view</span>
│ ├─ <span id="ren.PMODE">PMODE_BLOB </span><span class="editable">0x00000002</span>    <span class="comment">Blurry like Blob view</span>
│ ├─ <span id="ren.PMODE">PMODE_BLUR </span><span class="editable">0x00000004</span>    <span class="comment">Blurry like wtrv</span>
│ ├─ <span id="ren.PMODE">PMODE_GLOW </span><span class="editable">0x00000008</span>    <span class="comment">Glowy like PLUT with fancy view</span>
│ ├─ <span id="ren.PMODE">PMODE_SPARK </span><span class="editable">0x00000010</span>   <span class="comment">Sparks used to be drawn more fancily</span>
│ ├─ <span id="ren.PMODE">PMODE_FLARE </span><span class="editable">0x00000020</span>   <span class="comment">Flare like BOMB</span>
│ ├─ <span id="ren.PMODE">PMODE_LFLARE </span><span class="editable">0x00000040</span>  <span class="comment">Large flare like DEST</span>
│ ├─ <span id="ren.PMODE">PMODE_ADD </span><span class="editable">0x00000080</span>     <span class="comment">If particles are stacking then adds up the colours</span>
│ ├─ <span id="ren.PMODE">PMODE_BLEND </span><span class="editable">0x00000100</span>   <span class="comment">Weaker than the above, does blendy magic.</span>
│ │
│ ├─ <span id="ren.PSPEC_STICKMAN">PSPEC_STICKMAN </span><span class="editable">0x00000200</span> <span class="comment">Only works for STKM, shows them as STKM</span>
│ ├─ <span id="ren.OPTIONS">OPTIONS</span> <span class="editable">0x0000F000</span>        <span class="comment">A bit mask for the option bit. If you're making a custom render mode just always involve this.</span>
│ ├─ <span id="ren.NO_DECO">NO_DECO</span> <span class="editable">0x00001000</span>        <span class="comment">politely refuses decorations be drawn upon it (like LCRY)</span>
│ │
│ ├─ <span id="ren.DECO_FIRE">DECO_FIRE</span> <span class="editable">0x00002000</span>      <span class="comment">enables changing the blur colour via deco</span>
│ ├─ <span id="ren.FIREMODE">FIREMODE</span> <span class="editable">0x00FF0000</span>       <span class="comment">Bit mask for fire modes (below)</span>
│ ├─ <span id="ren.FIRE_ADD">FIRE_ADD</span> <span class="editable">0x00100000</span>       <span class="comment">A pixel mode that makes it drawn like a fire particle. </span>
│ ├─ <span id="ren.FIRE_BLEND">FIRE_BLEND</span> <span class="editable">0x00200000</span>     <span class="comment">^ with blendy magic.</span>
│ │
│ ├─ <span id="ren.EFFECT">EFFECT</span> <span class="editable">0xFF000000</span>
│ ├─ <span id="ren.EFFECT_GRAVIN">EFFECT_GRAVIN</span> <span class="editable">0x01000000</span>  <span class="comment">Enables what PRTI does (particle sucky effect), however more life/ctype magic may be needed</span>
│ ├─ <span id="ren.EFFECT_GRAVOUT">EFFECT_GRAVOUT</span> <span class="editable">0x02000000</span> <span class="comment">^ for PRTO</span>
│ ├─ <span id="ren.EFFECT_LINES">EFFECT_LINES</span> <span class="editable">0x04000000</span>
│ ├─ <span id="ren.EFFECT_DBGLINES">EFFECT_DBGLINES</span> <span class="editable">0x08000000</span>
│ │  <span class="comment">Render mode flags all bundled up together</span> 
│ ├─ <span id="ren.RENDER_EFFE">RENDER_EFFE </span><span class="editable">OPTIONS | PSPEC_STICKMAN | EFFECT | PMODE_SPARK | PMODE_FLARE | PMODE_LFLARE</span>
│ ├─ <span id="ren.RENDER_FIRE">RENDER_FIRE </span><span class="editable">OPTIONS | PSPEC_STICKMAN | <span class="comment nodash">/*PMODE_FLAT |*/</span> PMODE_ADD | PMODE_BLEND | FIREMODE</span>
│ ├─ <span id="ren.RENDER_GLOW">RENDER_GLOW </span><span class="editable">OPTIONS | PSPEC_STICKMAN | <span class="comment nodash">/*PMODE_FLAT |*/</span> PMODE_GLOW | PMODE_ADD | PMODE_BLEND</span>
│ ├─ <span id="ren.RENDER_BLUR">RENDER_BLUR </span><span class="editable">OPTIONS | PSPEC_STICKMAN | <span class="comment nodash">/*PMODE_FLAT |*/</span> PMODE_BLUR | PMODE_ADD | PMODE_BLEND</span>
│ ├─ <span id="ren.RENDER_BLOB">RENDER_BLOB </span><span class="editable">OPTIONS | PSPEC_STICKMAN | <span class="comment nodash">/*PMODE_FLAT |*/</span> PMODE_BLOB | PMODE_ADD | PMODE_BLEND</span>
│ ├─ <span id="ren.RENDER_BASC">RENDER_BASC </span><span class="editable">OPTIONS | PSPEC_STICKMAN | PMODE_FLAT | PMODE_ADD | PMODE_BLEND | EFFECT_LINES</span>
│ ├─ <span id="ren.RENDER_NONE">RENDER_NONE </span><span class="editable">OPTIONS | PSPEC_STICKMAN | PMODE_FLAT</span>
│ │
│ │  <span class="comment">What particle colors get drawn like - heat view or regular or whatnot</span>
│ ├─ <span id="ren.COLOUR_HEAT">COLOUR_HEAT    </span><span class="editable">0x0000001</span>    <span class="comment">This is like Heat view.</span>
│ ├─ <span id="ren.COLOUR_LIFE">COLOUR_LIFE    </span><span class="editable">0x0000002</span>    <span class="comment">Like Life display </span>
│ ├─ <span id="ren.COLOUR_GRAD">COLOUR_GRAD    </span><span class="editable">0x0000004</span>    <span class="comment">Like Heat Gradient display</span>
│ ├─ <span id="ren.COLOUR_BASC">COLOUR_BASC    </span><span class="editable">0x0000008</span>    <span class="comment">Like Basic display</span>
│ ├─ <span id="ren.COLOUR_DEFAULT">COLOUR_DEFAULT </span><span class="editable">0x00000000</span> <span class="comment">Default whatever</span>
│ │
│ ├─ <span id="ren.DISPLAY_AIRC">DISPLAY_AIRC </span><span class="editable">0x00000001</span>  
│ ├─ <span id="ren.DISPLAY_AIRP">DISPLAY_AIRP </span><span class="editable">0x00000002</span>   <span class="comment">Display air pressure</span>
│ ├─ <span id="ren.DISPLAY_AIRV">DISPLAY_AIRV </span><span class="editable">0x00000004</span>   <span class="comment">Display air velocity</span>
│ ├─ <span id="ren.DISPLAY_AIRH">DISPLAY_AIRH </span><span class="editable">0x00000008</span>   <span class="comment">Display air heat</span>
│ ├─ <span id="ren.DISPLAY_AIR">DISPLAY_AIR  </span><span class="editable">0x0000000F</span>
│ ├─ <span id="ren.DISPLAY_WARP">DISPLAY_WARP </span><span class="editable">0x00000010</span>   <span class="comment">Enable gravity wells</span>
│ ├─ <span id="ren.DISPLAY_PERS">DISPLAY_PERS </span><span class="editable">0x00000020</span>   <span class="comment">Display Persistent lines</span>
│ ├─ <span id="ren.DISPLAY_EFFE">DISPLAY_EFFE </span><span class="editable">0x00000040</span>
│ │
│ ├─ <span id="ren.renderModes">nil/table renderModes</span>     () <span class="comment">Get/set the render mode table</span>
│ │            └─              (table renderModeTable) 
│ ├─ <span id="ren.displayModes">nil/table displayModes</span>    () <span class="comment">Get/set the display mode table</span>
│ │            └─              (table displayModeTable) 
│ ├─ <span id="ren.colourMode">nil/int colourMode</span>        () <span class="comment">Get/set color mode</span>
│ │  colorMode                 (int colourMode) 
│ ├─ <span id="ren.decorations">nil/boolint decorations</span>   () <span class="comment">Get or set whether decorations are enabled.</span>
│ │              └─            (boolint state)
│ ├─ <span id="ren.grid">nil/int grid</span>              () <span class="comment">Get or set the grid display size</span>
│ │          └─                (int size) 
│ └─ <span id="ren.debugHUD">nil/int debugHUD</span>          () <span class="comment">Get/set whether or not debug HUD is visible. Replacement for tpt.setdebug</span>
│            └─                (int level)

│  <span class="comment" id="simulation">Simulation API</span>
│  <span class="comment">Everything to do with particles, pressure, heat, gravity, resetting temperature, whatnot.</span>
│  
│  
├ <span class="editable">simulation (sim)</span>
│ │
│ │  <span class="comment">Usable in property getter/setter functions instead of property names - </span>
│ │  <span class="comment">makes comparisons faster. </span>
│ ├─ FIELD_CTYPE
│ ├─ FIELD_DCOLOUR
│ ├─ FIELD_FLAGS
│ ├─ FIELD_LIFE
│ ├─ FIELD_TEMP
│ ├─ FIELD_TMP
│ ├─ FIELD_TMP2
│ ├─ FIELD_TYPE
│ ├─ FIELD_VX
│ ├─ FIELD_VY
│ ├─ FIELD_X
│ ├─ FIELD_Y
│ │
│ ├─ <span id="sim.partNeighbours">table partNeighbours</span>      (int x, int y, int radius) <span class="comment">Find list of particles around a center location, in a given radius.</span>
│ │        partNeighbors       (int x, int y, int radius, int type) <span class="comment">Filter for an element with a certain type too.</span>
│ ├─ <span id="sim.partChangeType">nil partChangeType</span>        (int index, int type) <span class="comment">Change particle type. Better than setting .type - </span>
│ │                                                  <span class="comment">some elements need special properties to work and this will set them</span>
│ ├─ <span id="sim.partCreate">nil partCreate</span>            (int x, int y, int type) <span class="comment">Create a particle.</span>
│ ├─ <span id="sim.partProperty">nil/mixed partProperty</span>    (int index, string field) <span class="comment">Get/set a property on a particle. Like tpt.get_property only better.</span>
│ │            └─              (int index, string field, mixed value) 
│ ├─ <span id="partPosition">int, int partPosition</span>     (int index) <span class="comment">Get x,y from a given particle index</span>
│ ├─ <span id="sim.partID">int partID</span>                (int x, int y) <span class="comment">Get index from a pair of coordinates (x, y)</span>
│ ├─ <span id="sim.partKill">nil partKill</span>              (int index) <span class="comment">Delete a particle properly</span>
│ │      └─                    (int x, int y)
│ ├─ <span id="sim.pressure">nil/int pressure</span>          (int x, int y) <span class="comment">Get/set pressure at <span class="editable">[wall coordinates]</span> x,y</span>
│ │          ├─                (int x, int y, int value)
│ │          └─                (int x, int y, int width, int height, int value)
│ ├─ <span id="sim.ambientHeat">nil/int ambientHeat</span>       (int x, int y) <span class="comment">Get/set ambient heat at <span class="editable">[wall coordinates]</span> x,y</span>
│ │          ├─                (int x, int y, int value)
│ │          └─                (int x, int y, int width, int height, int value)
│ ├─ <span id="sim.velocityX">nil/int velocityX</span>         (int x, int y) <span class="comment">Get/set velocity (x) at <span class="editable">[wall coordinates]</span> x,y</span>
│ │          ├─                (int x, int y, int value)
│ │          └─                (int x, int y, int width, int height, int value)
│ ├─ <span id="sim.velocityY">nil/int velocityY</span>         (int x, int y) <span class="comment">Get/set velocity (y) at <span class="editable">[wall coordinates]</span> x,y</span>
│ │          ├─                (int x, int y, int value)
│ │          └─                (int x, int y, int width, int height, int value)
│ ├─ <span id="sim.gravMap">nil/int gravMap</span>           (int x, int y) <span class="comment">Get/set gravity at <span class="editable">[wall coordinates]</span> x,y</span>
│ │          ├─                (int x, int y, int value)
│ │          └─                (int x, int y, int width, int height, int value)
│ ├─ <span id="sim.createParts">int createParts</span>           (int cx, int cy, int rx<span class="editable">[=d. 5]</span>, int ry<span class="editable">[=d. 5]</span>, 
│ │                             int type<span class="editable">[=d. selectedl]</span>, int brush<span class="editable">[=d. circle]</span>, int flags<span class="editable">[=d. replace flags]</span>) 
│ │                             <span class="comment">Creates multiple particles (like drawing with a brush!) </span>
│ │                             <span class="comment">Set rx and ry to horizontal and vertical radius (ellipse brush). Returns how many particles were changed.</span>
│ ├─ <span id="sim.createLine">int createLine</span>            (int x1, int y1, int x2, int y2, int rx, int ry, <span class="comment">Create line with createParts. Returns how many particles were changed.</span>
│ │                             int type<span class="editable">[=d. selectedl]</span>, int brush<span class="editable">[=d. circle]</span>, int flags<span class="editable">[=d. replace flags]</span>)
│ ├─ <span id="sim.createBox">int createBox</span>             (int x1, int y1, int x2, int y2, int type<span class="editable">[=d. selectedl]</span>, int flags<span class="editable">[=d. replace flags]</span>) <span class="comment">Filled box. Returns how many particles were changed.</span>
│ ├─ <span id="sim.floodParts">int floodParts</span>            (int x, int y, int type, int cm, int flags<span class="editable">[=d. replace flags]</span>) <span class="comment">Flood fill particles. Returns how many particles were changed.</span>
│ ├─ <span id="sim.createWalls">int createWalls</span>           (int cx, int cy, int rx<span class="editable">[=d. 0]</span>, int ry<span class="editable">[=d. 0]</span>, int type<span class="editable">[=d. 8]</span>) <span class="comment">Create walls. </span>
│ │  <span class="comment">(wall types go from right to left, 1 for rightmost not delete). Returns how many particles were changed.</span>
│ ├─ <span id="sim.createWallLine">nil createWallLine</span>        (int x1, int y1, int x2, int y2, int rx, int ry, int type<span class="editable">[=d. 8]</span>) <span class="comment">Create line with createParts                     </span>
│ ├─ <span id="sim.createWallBox">nil createWallBox</span>         (int x1, int y1, int x2, int y2, int type<span class="editable">[=d. 8]</span>) <span class="comment">Wall boxes!</span>
│ ├─ <span id="sim.floodWalls">int floodWalls</span>            (int x, int y, int type<span class="editable">[=d. 8]</span>, int bm) <span class="comment">Flood-fill walls! Returns how many particles were changed.</span>
│ ├─ <span id="sim.toolBrush">int toolBrush</span>             (int x, int y, int rx, int ry, int tool, int brush<span class="editable">[=d. circle]</span>) <span class="comment">Apply a tool (AIR, VACU, GRAV, HEAT)</span>
│ ├─ <span id="sim.toolLine">nil toolLine</span>              (int x1, int y1, int x2, int y2, int rx, int ry, int tool, int brush<span class="editable">[=d. circle]</span>) <span class="comment">Tool brush with line</span>
│ ├─ <span id="sim.toolBox">nil toolBox</span>               (int x1, int y1, int x2, int y2, int tool, float strength<span class="editable">[=d. 1.0]</span>) <span class="comment">Tool via box</span>
│ ├─ <span id="sim.decoBrush">nil decoBrush</span>             (int x, int y, int rx, int ry, int r, int g, int b, int a, int tool<span class="editable">[=d. DECO_DRAW]</span>, int brush<span class="editable">[=d. circle]</span>) <span class="comment">Draw decorations</span>
│ ├─ <span id="sim.decoLine">nil decoLine</span>              (int x, int y, int rx, int ry, int r, int g, int b, int a, int tool<span class="editable">[=d. DECO_DRAW]</span>, int brush<span class="editable">[=d. circle]</span>)
│ ├─ <span id="sim.decoBox">nil decoBox</span>               (int x1, int y1, int x2, int y2, int r, int g, int b, int a, int tool) <span class="comment">Draw a box of decorations.</span>
│ ├─ <span id="sim.decoColor">nil decoColor</span>             () <span class="comment">Get/Set currently selected deco colour (0xAARRGGBB)</span>
│ │      └─ = nil decoColour   (int colour<span class="editable">[=d. 0xFFFF0000]</span>)
│ ├─ <span id="sim.clearSim">nil clearSim</span>              () <span class="comment">Clear everything on the save</span>
│ ├─ <span id="sim.resetTemp">nil resetTemp</span>             () <span class="comment">Resets heat of every particle to room temperature (optionally, only metals et al)</span>
│ │      └─                    (boolint onlyConductives)
│ │
│ ├─ <span id="sim.resetPressure">nil resetPressure</span>         () <span class="comment">Resets pressure everywhere, or at (x, y), or as a box</span>
│ │      ├─                    (int x, int y)  
│ │      └─                    (int x1, int y1, int width, int height)
│ │
│ ├─ <span id="sim.saveStamp">string saveStamp</span>          (int x, int y, int width, int height) <span class="comment">Saves a stamp and returns its cryptic name</span>
│ ├─ <span id="sim.loadStamp">nil/int loadStamp</span>         (mixed id, int x, int y) <span class="comment">Loads a stamp by its cryptic name and places it at x, y. </span>
│ │  <span class="comment">The ID can either be char<span class="editable">[10]</span> or integer. 1 if not OK, nil otherwise.</span>
│ ├─ <span id="sim.loadSave">nil loadSave</span>              (int saveID, int timehistory) <span class="comment">Loads a save or its previous variant at the time (in exact seconds!) it was saved.</span>
│ ├─ <span id="sim.getSaveID">nil/int getSaveID</span>         () <span class="comment">Returns the current save's ID.</span>
│ ├─ <span id="sim.adjustCoords">int, int adjustCoords</span>     (int x, int y) <span class="comment">Set zoom window coordinates to here</span>
│ ├─ <span id="sim.prettyPowders">nil/int prettyPowders</span>     () <span class="comment">Gets/Sets the powder noise thing</span>
│ │          └─                (boolint state)
│ ├─ <span id="sim.gravityGrid">nil/int gravityGrid</span>       () <span class="comment">Gets/Sets the gravity dot thing</span>
│ │          └─                (boolint state)
│ ├─ <span id="sim.edgeMode">nil/int edgeMode</span>          () <span class="comment">Gets/Sets the edge mode. 0 = Void. 1 = Solid.</span>
│ │          └─                (int mode)
│ ├─ <span id="sim.gravityMode">nil/int gravityMode</span>       () <span class="comment">Gets/Sets gravity mode. Vertical, Radial, Off, in some order.</span>
│ │          └─                (int mode)
│ ├─ <span id="sim.airMode">nil/int airMode</span>           () <span class="comment">Gets/Sets the air mode. On, No Velocity, No Pressure, No Update, Off in some order.</span>
│ │          └─                (int mode)
│ ├─ <span id="sim.waterEqualisation">nil/boolint waterEqualisation</span> () <span class="comment">Gets/Sets water equalization.</span>
│ │              └─ = waterEqualization (boolint state) 
│ ├─ <span id="sim.ambientAirTemp">nil/int ambientAirTemp</span>    () <span class="comment">Gets/Sets Ambient Heat mode's air temperature. Default: 293.15</span>
│ │          └─                (int temp)
│ │  <span id="sim.canMove"></span>
│ ├─ <span id="sim.can_move">nil/int can_move</span>           (int src, int dst) <span class="comment">Gets/Sets what happens when element with ID (src) and element with ID (dst) try and move through each other</span>
│ │          └─                (int src, int dst, int new_value) <span class="comment">Similar to C++ can_move[src][dst] - check out <a href="https://github.com/simtr/The-Powder-Toy/blob/master/src/simulation/Simulation.cpp#L1932">Simulation.cpp</a></span>
│ │                                                              <span class="comment">0 = no move / bounce back, eg AMTR trying to move onto DMND</span>
│ │                                                              <span class="comment">1 = swap particle locations, eg BHOL swaps elements into itself and then eats them </span>
│ │                                                              <span class="comment">2 = two particles in the same space, eg two energy particles crossing</span>
│ │                                                              <span class="comment">3 = other/handled elsewhere, eg PHOT trying to move into LCRY is actually handled in some update function</span>
│ │ 
│ ├─ <span id="sim.elementCount">int elementCount</span>          (element type) <span class="comment">Returns how many particles have this type on the screen.</span>
│ ├─ <span id="sim.parts">iter parts</span>                () <span class="comment">Returns an iterator returning existing element indexes which you can <span class="editable">for index in sim.parts()</span> over.</span>
│ ├─ <span id="sim.pmap">int16 pmap</span>                (int x, int y) <span class="comment">Returns the sim->pmap entry for a given location. The entry looks like index &gt;&gt; 8 | type</span>
│ └─ <span id="sim.neighbours">iter neighbours</span>                (int x, int y, int rx, int ry) <span class="comment">Returns an object which you can for..in over, returning neighbor particles.  </span>
│         └─ = neighbors

│  <span class="comment" id="bit">Bit API</span>
│  <span class="comment">Because Lua doesn't have one.</span>
│  
└ <span class="editable">bit</span>
  │ 
  ├─ <span id="bit.tobit">int tobit</span>                 (int input) <span class="comment">Normalize for binary operations. bit.* functions do it already.</span>
  ├─ <span id="bit.tohex">string tohex</span>              (int input, int length) <span class="comment">Generate a hex string from the input.</span>
  │ 
  ├─ <span id="bit.bnot">int bnot</span>                  (int input) <span class="comment">Performs bitwise NOT (~input)</span>
  ├─ <span id="bit.band">int band</span>                  (int... input) <span class="comment">Performs bitwise AND (input&amp;input) over all arguments.</span>
  ├─ <span id="bit.bor">int bor</span>                   (int... input) <span class="comment">Performs bitwise OR (input|input) over all arguments. </span>
  ├─ <span id="bit.bxor">int bxor</span>                  (int... input) <span class="comment">Performs bitwise XOR (input^input) over all arguments. </span>
  │ 
  ├─ <span id="bit.lshift">int lshift</span>                (int input, int count) <span class="comment">Performs a leftwards bit shift (input &lt;&lt; count). </span>
  ├─ <span id="bit.rshift">int rshift</span>                (int input, int count) <span class="comment">Performs a rightwards bit shift (input &gt;&gt; count). </span>
  ├─ <span id="bit.arshift">int arshift</span>               (int input, int count) <span class="comment">Performs a rightwards arithmetic bit shift (input &gt;&gt;&gt; count). </span>
  │ 
  ├─ <span id="bit.rol">int rol</span>                   (int input, int count) <span class="comment">Rotates a bit right by count bits. </span>
  ├─ <span id="bit.ror">int ror</span>                   (int input, int count) <span class="comment">Rotates a bit right by count bits. </span>
  │ 
  └─ <span id="bit.bswap">int bswap</span>                 (int input) <span class="comment">Swaps endianness of the number.</span>

</div><div class="properties-overview"><span class="editable" id="property">Lua Property API</span>
----------------

An element has many properties as seen above in the tpt.parts[] array definition. 
I've copied the list below for reference.

Elements
~~~~~~~~

* Check out <a href="#properties">the properties reference</a> for what each of these
  does.

<span class="editable" id="tpt.el">tpt.el.[inst].*</span>
  │
  ├─ <span id="tpt.el.name">char[4] name</span>
  ├─ <span id="tpt.el.color">int color</span>
  ├─ <span id="tpt.el.advection">float advection</span>
  ├─ <span id="tpt.el.airdrag">float airdrag</span>
  ├─ <span id="tpt.el.airloss">float airloss</span>
  ├─ <span id="tpt.el.loss">float loss</span>
  ├─ <span id="tpt.el.collision">float collision</span>
  ├─ <span id="tpt.el.gravity">float gravity</span>
  ├─ <span id="tpt.el.diffusion">float diffusion</span>
  ├─ <span id="tpt.el.hotair">float hotair</span>
  ├─ <span id="tpt.el.falldown">int falldown</span>
  ├─ <span id="tpt.el.flammable">int flammable</span>
  ├─ <span id="tpt.el.explosive">int explosive</span>
  ├─ <span id="tpt.el.meltable">boolint meltable</span>
  ├─ <span id="tpt.el.hardness">int hardness</span>
  ├─ <span id="tpt.el.menu">boolint menu</span>
  ├─ <span id="tpt.el.enabled">boolint enabled</span>
  ├─ <span id="tpt.el.weight">int weight</span>
  ├─ <span id="tpt.el.menusection">int menusection</span>
  ├─ <span id="tpt.el.heat">float heat</span>
  ├─ <span id="tpt.el.hconduct">int hconduct</span>
  ├─ <span id="tpt.el.state">int state</span>
  ├─ <span id="tpt.el.properties">int properties</span>
  └─ <span id="tpt.el.description">string description</span>

<span class="comment">Element transitions - check out <a href="#transitions">#transitions</a></span>
<span class="editable" id="tpt.eltransition">tpt.eltransition.[inst].*</span>
  │
  ├─ <span id="tpt.eltransition.presHighValue">presHighValue</span>
  ├─ <span id="tpt.eltransition.presHighType">presHighType</span>
  ├─ <span id="tpt.eltransition.presLowValue">presLowValue</span>
  ├─ <span id="tpt.eltransition.presLowType">presLowType</span>
  ├─ <span id="tpt.eltransition.tempHighValue">tempHighValue</span>
  ├─ <span id="tpt.eltransition.tempHighType">tempHighType</span>
  ├─ <span id="tpt.eltransition.tempLowValue">tempLowValue</span>
  └─ <span id="tpt.eltransition.tempLowType">tempLowType</span>

<span class="comment">All sorts of properties - check out <a href="#properties">#properties</a></span>
<span class="editable" id="elements.property">elements.property(*</span>
  │  
  ├─ <span id="elements.property.Name">string Name</span>
  ├─ <span id="elements.property.Colour">int Colour/Color</span>
  ├─ <span id="elements.property.MenuVisible">boolint MenuVisible</span>
  ├─ <span id="elements.property.MenuSection">int MenuSection</span>
  ├─ <span id="elements.property.Advection">float Advection</span>
  ├─ <span id="elements.property.AirDrag">float AirDrag</span>
  ├─ <span id="elements.property.AirLoss">float AirLoss</span>
  ├─ <span id="elements.property.Loss">float Loss</span>
  ├─ <span id="elements.property.Collision">float Collision</span>
  ├─ <span id="elements.property.Gravity">float Gravity</span>
  ├─ <span id="elements.property.Diffusion">float Diffusion</span>
  ├─ <span id="elements.property.HotAir">float HotAir</span>
  ├─ <span id="elements.property.Falldown">int Falldown</span>
  ├─ <span id="elements.property.Flammable">boolint Flammable</span>
  ├─ <span id="elements.property.Explosive">int Explosive</span>
  ├─ <span id="elements.property.Meltable">boolint Meltable</span>
  ├─ <span id="elements.property.Hardness">float Hardness</span>
  ├─ <span id="elements.property.Weight">int Weight</span>
  ├─ <span id="elements.property.Temperature">int Temperature</span>
  ├─ <span id="elements.property.HeatConduct">int HeatConduct</span>
  ├─ <span id="elements.property.Description">string Description</span>
  ├─ <span id="elements.property.State">int State</span>
  ├─ <span id="elements.property.Properties">int Properties</span>
  │  <span class="comment">element transition related stuff - melting, freezing, pressure ...</span>
  ├─ <span id="elements.property.LowPressure">int LowPressure</span> 
  ├─ <span id="elements.property.LowPressureTransition">element LowPressureTransition</span>
  ├─ <span id="elements.property.HighPressure">int HighPressure</span> 
  ├─ <span id="elements.property.HighPressureTransition">element HighPressureTransition</span>
  ├─ <span id="elements.property.LowTemperature">int LowTemperature</span> 
  ├─ <span id="elements.property.LowTemperatureTransition">element LowTemperatureTransition</span>
  ├─ <span id="elements.property.HighTemperature">int HighTemperature</span> 
  ├─ <span id="elements.property.HighTemperatureTransition">element HighTemperatureTransition</span>
  ├─ <span id="elements.property.Update">function(int index, int x, int y, int surround_space, int nt) Update</span>
  └─ <span id="elements.property.Graphics">function(int index, int colr, int colg, int colb) Graphics</span>

<span class="editable" id="particles">Particles</span>
~~~~~~~~~

(particle)
  │
  ├─ <span id="particles.type">int type</span>      <span class="comment">which element type is this?</span>
  ├─ <span id="particles.life">int life</span>      <span class="comment">commonly used on various elements to induce timed death - can be set to automatically decrease</span>
  ├─ <span id="particles.ctype">int ctype</span>     <span class="comment">commonly used as the "underlying type" of various elements like SPRK's original metal</span>
  ├─ <span id="particles.x">float x</span>       <span class="comment">the element's X coordinate</span>
  ├─ <span id="particles.y">float y</span>       <span class="comment">the element's X coordinate</span>
  ├─ <span id="particles.vx">float vx</span>      <span class="comment">the element's horizontal speed (&gt;0 = right, &lt;0 = left)</span>
  ├─ <span id="particles.vy">float vy</span>      <span class="comment">the element's vertical speed (&gt;0 = right, &lt;0 = left)</span>
  ├─ <span id="particles.temp">float temp</span>    <span class="comment">the element's temperature in kelvins (displayed - 273.15)</span>
  ├─ <span id="particles.pavg">float pavg[2]</span> <span class="comment">magic</span>
  ├─ <span id="particles.flags">int flags</span>     <span class="comment">special flags that aren't saved - stuff like FLAG_STAGNANT</span>
  ├─ <span id="particles.tmp">int tmp</span>       <span class="comment">generic use integer for an element - used lots for usage modes like FILT filter modes</span>
  ├─ <span id="particles.tmp2">int tmp2</span>      <span class="comment">another generic use integer for an element - things like EXOT use it as colour storage</span>
  └─ <span id="particles.dcolour">unsigned int dcolour</span> <span class="comment">the colour of the decorations drawn onto it: 0xAARRGGBB</span>

</div><div class="properties-detailed"><span id="properties">Properties</span>
----------
<h2 id="properties.Advection">float Advection</h2>

<p>How much the particle is pushed by moving air. Normally 0 for solids, and up to
1 for other elements. </p>

<p>It can be negative, ANAR and DEST do this so it goes towards pressure.</p>
<h2 id="properties.AirDrag">float AirDrag</h2>

<p>How much air the particle "drags" along with itself when moving. CFDS is a 
magical constant that makes airdrag properly work with different pressure 
grid sizes. Thus the definition should always be multiplied by that.</p>

<p>For example,</p>
<code>AirDrag = 0.004f * CFDS;</code>
<h2 id="properties.AirLoss">float AirLoss</h2>

<p>How much it reduces velocity. 1 for no effect, 0 for full effect.</p>

<p>Note: TTAN is not powered by this and this means you can't make TTAN simply by
setting this value to zero. Pressure can jump around a bit, too!</p>
<h2 id="properties.Collision">float Collision</h2>

<p>When this particle hits something, this value is used to determine new 
velocity.</p>
<h2 id="properties.Colour">int Colour</h2>

<p>This will be the particle's colour in Basic render mode as well as 
the element button's. It has a format similar to CSS colours: `0xRRGGBB` where 
every letter specifies which colour the byte specifies, so 0xFF0000 would have 
exactly 255/255 tones red, and 0 tones both green and blue.</p>

<p>You can set it in C++ by using the PIXPACK preprocessor macro: </p>

<code>Colour = PIXPACK(0x333333);</code>

<p>...and in Lua by using elements.property with the same hexadecimal value.</p>

<h2 id="properties.Description">const char* (or string) Description</h2>

<p>It's the text that the element shows when you put your mouse over its selection
button! Meant to be an element's description semantically speaking, however. So
use it as that :)</p>

<code>Description = "Broken Coal. Heavy particles. See COAL";</code>
<h2 id="properties.Diffusion">float Diffusion</h2>

<p>poke boxmein to add text here</p>
<h2 id="properties.Enabled">boolint Enabled</h2>

<p>If the element is enabled to be used in-game at all, use a value of 1. You can 
use a value of 0 to disable elements softly while still breaking every save in 
existence. In general, keep it as 1.</p>
<h2 id="properties.Explosive">int Explosive</h2>

<p>Sets default behaviour on if and how this element explodes. It works kind of
like C4 does: like burning except it spreads around very quickly, often in a
single tick, creating more pressure than normal. You can obviously do this in
your update code though...</p>

<code class="nohighlight">0 = no default explosion behavior.
1 = Explodes with fire.
2 = Explodes with &gt;2.5 pressure as well as fire.</code>
<h2 id="properties.Falldown">int Falldown</h2>

<p>Sets what kind of default moving code this particle will use.</p>

<code class="nohighlight">0 = Solid  (or rather, no 'regular' movement!)
1 = Powder 
2 = Liquid </code>

<h2 id="properties.Flammable">int Flammable</h2>

<p>How well this particle catches on fire. FIRE has a basic reaction in  which it
checks how flammable nearby particles are and uses that as a number to say how
quickly and how likely this particle will turn into fire. Particles are
entirely nonflammable at 0 and from there on become increasingly more
flammable.</p>

<span id="properties.graphics_func"></span>
<h2 id="properties.Graphics">int (*Graphics) (GRAPHICS_FUNC_ARGS)</h2>

<p>Allows you to specify a function to change the particle's color and various
effects applied to it.</p>

<p>For how this works in Lua, you are passed four variables and expected to 
return a dozen more.</p>

<code class="nohighlight">Parameters: index, colr, colg, colb
Return values: cache, pixel_mode, cola, colr, colg, colb, firea, firer, 
               fireg, and fireb.</code>

<p>The cache variable tells the graphics renderer not to call this function any-
more, since the color won't change anyway. Aside that, all properties are the 
same as what C++ should have them.</p>

<p>In C++ however, you are passed pointers with all the values to be returned. 
Bluntly assign to them as you would to any other pointer.</p>

<code>*colr = 255;</code>

<p>Also check out all the different arguments you will get as your function
parameters.</p>

<code>#define GRAPHICS_FUNC_ARGS Renderer * ren, Particle *cpart, int nx, int ny, 
     int *pixel_mode, int *cola, int *colr, int *colg, 
     int *colb, int *firea, int *firer, int *fireg, int *fireb</code>

<code class="nohighlight">
<span class="editable">ren</span> contains a reference to your local neighbourhood renderer, 
<span class="editable">cpart</span> your current particle (you can do stuff like cpart->life!), 
<span class="editable">nx</span> and <span class="editable">ny</span> to the particle's actual position (x and y),
<span class="editable">pixel_mode</span> to any extra effects the pixel may be subject to,
<span class="editable">cola</span>, <span class="editable">colr</span>, <span class="editable">colg</span> and <span class="editable">colb</span> represent the element's Colour property (alpha, 
red, green and blue) at first, but should be modified to the end result's 
colour, 
<span class="editable">firea</span>, <span class="editable">firer</span>, <span class="editable">fireg</span> and <span class="editable">fireb</span> represent the fiery glow's colour, if the 
element has a fiery glow pixel mode applied, as alpha, red, green and blue.
</code><h2 id="properties.Gravity">float Gravity</h2>

<p>This determines how strongly gravity affects this particle. ANAR has this set as 
negative for example!</p>

<code><span class="comment nodash">// No effect</span>
Gravity = 0f; 
<span class="comment nodash">// Floats upwards at normal gravity's speed</span>
Gravity = -1f; 
<span class="comment nodash">// Floats downwards almost at normal gravity's speed</span>
Gravity = 0.999f;</code>

<h2 id="properties.Hardness">int Hardness</h2>

<p>How well acid affects this particle. The bigger this value is, the better acid
is at eating through it. </p>
<h2 id="properties.HeatConduct">int HeatConduct</h2>

<p>Shows how well this particle transfers heat. In tpt.el.*, it's called hconduct
instead of heatconduct. You can use a value from 0 (none at all) to 255 
(really good). </p>

<p>INSL and FRME have this as 0. <br>
INSL/INST/HSWC and a few more have 251.</p>
<h2 id="properties.HotAir">float HotAir</h2>

<p>How much the particle increases the pressure around itself by, in order to 
simulate heating air around (this was made way before ambient heat). Another 
property that's mostly only used for gasses, but VENT/VACU have theirs at (-)0.010f. 
An extremely small number, sometimes as small as 0.000001f</p>

<p>Note: ICE has this as a negative value - it slightly reduces pressure!</p>
<h2 id="properties.Identifier">string Identifier</h2>

<p>Element's name on the Lua API. You usually set it to &lt;NAMESPACE&gt;_PT_&lt;ELEMENTNAME&gt;,
in order to tell the executable what your element ID variable will be called
inside Lua.</p>

<p>An example value could be: </p>

<code>Identifier = "DEFAULT_PT_BCOL";</code>

<p>In Lua scripting, you can set it with:</p>

<code>local element_id = elements.allocate("DEFAULT", "BCOL")</code>
<h2 id="properties.Loss">float Loss</h2>

<p>How much speed the particle loses every frame. 1 means that no velocity is 
removed and anything less means that more velocity will be removed.</p>
<h2 id="properties.Meltable">int Meltable</h2>

<p>Does this particle melt into LAVA? (I'm not sure about the threshold just yet.)</p>
<h2 id="properties.MenuSection">boolint MenuSection</h2>

<p>Which menu section it's under.</p>
<p>Menu section constants can be found under <a href="#elem.SC_WALLS">SC_*</a>
in the reference tree.</p>
<h2 id="properties.MenuVisible">boolint MenuVisible</h2>

<p>Sets or gets whether this element gets placed into a menu. You can still access
the element without it being in the menu via alt-click sampling. A value of 1
means that the item will have a button placed into some menu.</p>
<h2 id="properties.Name">string(4) Name</h2>

<p>This is the element's name outside the Lua API. It's what will be drawn on top 
of the element's button and what one will use to refer to the element in the 
exclamation-point command interface.</p>

<p>An example value could be:</p>

<code>Name = "BCOL";</code>
<h2 id="properties.Properties">int Properties</h2>

<p>Every kind of element property other than the ones above. It's just a bunch of 
special flags that enable or disable things relating to this element. Some of
the things include whether you can 'paint' ctypes onto this element, whether it
can be 'painted' as a ctype onto other elements, stuff to do with neutron 
movements, etc.</p>
<p>If you want to use multiple at the same time, apply binary OR to them! Easy 
enough, right? </p>

<code>Properties = TYPE_PART | PROP_NEUTPENETRATE;</code>
<h2 id="properties.State">int State</h2>

<p>It's just a flag to tell which state the element's in right now, or even if it 
doesn't have a state. The only place I've seen it used so far is STKM figuring
out which particles it can spark...?</p>

<code class="nohighlight">(elements.)ST_SOLID = Solid
(elements.)ST_LIQUID = Liquid 
(elements.)ST_GAS = Gas 
(elements.)ST_NONE = None of the above.</code> 

<code>State = ST_SOLID;</code>
<h2 id="properties.Temperature">float Temperature</h2>

<p>The spawning temperature of this element. If you draw or create it in a standard
way then this is the heat the element will have once it's created. The value's 
in Kelvin though, so you'll have to convert if you don't like it. You could also
just do addition if you're in C++ or even Lua, it gets optimized out.</p>

<code>// #define R_TEMP 22.0f
Temperature = R_TEMP + 273.15f + 0.00f;</code>

<h2 id="properties.Update">int (*Update) (UPDATE_FUNC_ARGS)</h2>

<p>This is a function that will be called for every particle once per tick. You can
do various things here with the simulation and particles around you, and so this
is an useful function for all sorts of updating purposes.</p>

<p>You can see the various objects you can access from the function (and others 
through them):</p>

<p>(in C++):</p>
<code>#define UPDATE_FUNC_ARGS Simulation* sim, int index, int x, int y, 
                         int surround_space, int no_type, Particle *parts, 
                         int pmap[YRES][XRES]</code>

<p>(in Lua):</p>
<code>number index, number x, number y, number surround_space, number nt</code>

<p>Once you define your function, the assignment to this property is very simple:</p>

<code>Update = &amp;Element_BCOL::update;</code>
<h2 id="properties.Weight">int Weight</h2>

<p>Particle weight. A looong time ago there used to be a table that kept track
of what element sank under which and which it stayed on top of.</p>

<p>Below is an estimate to which range TPT's default elements' weights belong:</p>

<code class="nohighlight">
    1 = gasses.
    2 = very light powders. DUST?
 0-49 = liquids.
50-99 = default powders.
  100 = solids.
   -1 = energy particles (PHOT/NEUT/ELEC/PROT).
</code>
</div><div class="misc"><span id="properties.pixel_mode">Pixel modes</span><br>
-----------<br>
<p>There's a handy <a href="http://powdertoy.co.uk/Wiki/W/File:Particle_Drawing_Modes.png.html">pixel mode image</a> on the wiki, so definitely
check it out!</p>

<p>Also note that PRTI/PRTO effects cannot be applied without some witchcraft applied to the ctype
and life values of the element. Check out Renderer::render_parts if really interested.</p>

<pre><code class="hljs lua">pixel_mode
  │
  │ -- Prevents anything from being drawn. Kinda like WARP.
  ├─ PMODE_NONE     0x00000000
  │ -- Draw an opaque pixel, aka transparency is not applied.
  ├─ PMODE_FLAT     0x00000001
  │ -- Adds a blobby effect, like you were using blob (5) display mode
  ├─ PMODE_BLOB     0x00000002
  │ -- Liquids in Fancy display apply this. Adds a blur and makes the pixels
  │ -- remain sharp as well.
  ├─ PMODE_BLUR     0x00000004
  │ -- Plain ol' glow. Stuff like ARAY (In fancy display) use this.
  ├─ PMODE_GLOW     0x00000008
  │ -- Kinda dim PMODE_FLARE - GBMB uses this - beams running horizontally and
  │ -- vertically + glow to emphasize brightness
  ├─ PMODE_SPARK    0x00000010
  │ -- Regularly bright PMODE_FLARE - BOMB uses this - beams running
  │ -- horizontally and vertically
  ├─ PMODE_FLARE    0x00000020
  │ -- Large and super bright PMODE_FLARE - DEST is the only thing using this.
  ├─ PMODE_LFLARE   0x00000040
  │ -- This adds some magic to the equation to make multiple layered particles
  │ -- add up to be brighter than one particle alone.
  ├─ PMODE_ADD      0x00000080
  │ -- Even more magical than PMODE_ADD, somehow better for OpenGL?
  ├─ PMODE_BLEND    0x00000100
  │ -- Something very STKM specific that won't work anywhere except on STKM
  ├─ PSPEC_STICKMAN 0x00000200
  │ -- Disables decorations on this element (LCRY does this as well as some
  │ -- magic to paint itself colours)
  ├─ NO_DECO        0x00001000
  │ -- The fire/blurriness colors get decorations too. Gasses might use this.
  ├─ DECO_FIRE      0x00002000
  │ -- Adds fire colors around the element (although weak ones - LAVA and LIGH
  │ -- lines use that)
  ├─ FIRE_ADD       0x00010000 -- adds a weak fire effect around the element
  │ -- (ex. LAVA/LIGH)
  │ -- Adds more impressive fire colors around the element. Gasses use this
  │ -- for their coloring.
  ├─ FIRE_BLEND     0x00020000
  │ -- PRTI/PRTO effect flags: note that they need magic life/ctype
  │ -- variables!
  ├─ EFFECT_GRAVIN  0x01000000
  └─ EFFECT_GRAVOUT 0x02000000
</code></pre>
<span class="editable" id="goltable">Game of Life IDs</span><br>
-----<br>

<p>Game of Life used to be separate elements in The Powder Toy, but has been
replaced with a single element called LIFE. The kind of cellular automaton a
particle of LIFE represents is determined by the ctype property. Here's a quick
overview of the available ctypes for LIFE:</p>

<div class="pre-ws">
- GOL   <span class="editable">0</span>
- HLIF  <span class="editable">1</span>
- ASIM  <span class="editable">2</span>
- 2x2   <span class="editable">3</span>
- DANI  <span class="editable">4</span>
- AMOE  <span class="editable">5</span>
- MOVE  <span class="editable">6</span>
- PGOL  <span class="editable">7</span>
- DMOE  <span class="editable">8</span>
- 34    <span class="editable">9</span>
- LLIF <span class="editable">10</span>
- STAN <span class="editable">11</span>
- SEED <span class="editable">12</span>
- MAZE <span class="editable">13</span>
- COAG <span class="editable">14</span>
- WALL <span class="editable">15</span>
- GNAR <span class="editable">16</span>
- REPL <span class="editable">17</span>
- MYST <span class="editable">18</span>
- LOTE <span class="editable">19</span>
- FRG2 <span class="editable">20</span>
- STAR <span class="editable">21</span>
- FROG <span class="editable">22</span>
- BRAN <span class="editable">23</span>
</div>
</div><p>Good luck coding! Hope this will come in handy.
~boxmein
</p></main><footer><div class="section">Other:<a href="http://tpt.io/:18511">forum thread</a><a href="https://github.com/boxmein/tptelements2">github</a><a href="http://tpt.io/@boxmein">boxmein on tpt</a><a href="http://boxmein.net">boxmein</a></div></footer><script src="//code.jquery.com/jquery-1.11.0.min.js"></script><script src="/highlightjs/highlight.pack.js"></script><script src="/js/lua-ref-stuff.js"></script><script>hljs.initHighlightingOnLoad();
</script><div class="lastmod">Last Modified: Sun Jan 17 2016 01:25:21 GMT+0200 (EET)</div></body></html>